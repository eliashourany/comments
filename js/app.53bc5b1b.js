(function(){"use strict";var e={5713:function(e,t,o){var n=o(5130),s=o(6768);function a(e,t,o,n,a,r){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(l)}var r=(0,s.pM)({data(){return{}}}),l=o(1241);const i=(0,l.A)(r,[["render",a]]);var c=i,u=o(4458);(0,u.k)("/comments/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=o(1387);const m={class:"container"};function p(e,t,o,n,a,r){const l=(0,s.g2)("comment-list"),i=(0,s.g2)("comment-form");return(0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(l,{onOnDelete:e.deleteComment,comments:e.comments,username:e.user.username,onOnUpvote:t[0]||(t[0]=t=>e.vote({commentId:t,isUpvote:!0})),onOnDownvote:t[1]||(t[1]=t=>e.vote({commentId:t,isUpvote:!1})),upvotes:e.upvotes,downvotes:e.downvotes},null,8,["onOnDelete","comments","username","upvotes","downvotes"]),(0,s.bF)(i)])}var v=o(782);function f(e,t,o,a,r,l){const i=(0,s.g2)("comment-item"),c=(0,s.g2)("comment-list",!0);return(0,s.uX)(),(0,s.Wv)(n.F,{tag:"div",name:"list",appear:"",class:"list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.comments,(o=>((0,s.uX)(),(0,s.CE)(s.FK,{key:o.id},[(0,s.bF)(i,{comment:o,username:e.username,level:e.level,onOnDelete:e.onDelete,onOnCollapse:t=>e.onCollapse(t,o.id),onOnDownvote:t[0]||(t[0]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[1]||(t[1]=t=>e.$emit("onUpvote",t)),upvoting:e.upvotes.includes(o.id),downvoting:e.downvotes.includes(o.id)},null,8,["comment","username","level","onOnDelete","onOnCollapse","upvoting","downvoting"]),o.replies.length>0&&!e.isCollapsed(o.id)?((0,s.uX)(),(0,s.Wv)(c,{key:0,comments:o.replies,username:e.username,level:e.level+1,onOnDelete:e.onDelete,onOnDownvote:t[2]||(t[2]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[3]||(t[3]=t=>e.$emit("onUpvote",t)),upvotes:e.upvotes,downvotes:e.downvotes},null,8,["comments","username","level","onOnDelete","upvotes","downvotes"])):(0,s.Q3)("",!0)],64)))),128))])),_:1})}var h=o(4232);const g=["datetime"],_={class:"comment__actions"},b=["src"],w=["src"],C=["src"];function y(e,t,o,a,r,l){const i=(0,s.g2)("Avatar"),c=(0,s.g2)("Badge"),u=(0,s.g2)("Button"),d=(0,s.g2)("Vote"),m=(0,s.g2)("Container");return(0,s.uX)(),(0,s.Wv)(m,{collapsable:"",onOnCollapse:e.onCollapse,classes:{container:"comment",content:"comment__content",header:"comment__header"}},{header:(0,s.k6)((()=>[(0,s.bF)(i,{username:e.comment.user.username,"is-online":e.comment.user.isOnline,"image-url":e.comment.user.avatar},null,8,["username","is-online","image-url"]),(0,s.bF)(n.eB,{name:"badge"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{theme:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,h.v_)(e.numberOfRepliesText),1)])),_:1},512),[[n.aG,e.collapsed]])])),_:1}),e.isAuthor(e.comment)?((0,s.uX)(),(0,s.Wv)(c,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)(" You ")])),_:1})):(0,s.Q3)("",!0),(0,s.Lk)("time",{class:"comment__date",datetime:e.comment.createdAt},(0,h.v_)(e.timeAgo(e.comment.createdAt)),9,g),(0,s.Lk)("div",_,[e.isAuthor(e.comment)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(u,{outlined:"",theme:"secondary",onOnClick:e.onDelete},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.trashIcon,class:"comment__icon"},null,8,b),(0,s.eW)(" Delete ")])),_:1},8,["onOnClick"]),(0,s.bF)(u,{outlined:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.editIcon,class:"comment__icon"},null,8,w),(0,s.eW)(" Edit ")])),_:1})],64)):((0,s.uX)(),(0,s.Wv)(u,{key:1,outlined:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.backIcon,class:"comment__icon"},null,8,C),(0,s.eW)(" Reply")])),_:1}))])])),content:(0,s.k6)((()=>[(0,s.bF)(d,{onOnDownvote:t[0]||(t[0]=()=>e.$emit("onDownvote",e.comment.id)),onOnUpvote:t[1]||(t[1]=()=>e.$emit("onUpvote",e.comment.id)),upvoting:e.upvoting,downvoting:e.downvoting,score:e.comment.score,horizontal:e.shouldCollapse},null,8,["upvoting","downvoting","score","horizontal"]),(0,s.eW)(" "+(0,h.v_)(e.comment.content),1)])),_:1},8,["onOnCollapse"])}const O={class:"container"},k=["aria-labelledby"],E=["src","alt"],S={key:1,class:"avatar__default","aria-hidden":"true"},D=["src"],A={key:2,class:"avatar__status","aria-label":"Online"},T=["id"];function $(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("div",O,[(0,s.Lk)("figure",{class:"avatar","aria-labelledby":e.username},[e.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.imageUrl,alt:e.username+" avatar",class:"avatar__image"},null,8,E)):((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("img",{src:e.userIcon,class:"avatar__default-image"},null,8,D)])),e.isOnline?((0,s.uX)(),(0,s.CE)("span",A)):(0,s.Q3)("",!0)],8,k),(0,s.Lk)("figcaption",{id:e.username,class:"caption"},(0,h.v_)(e.username),9,T)])}var I=o.p+"img/user.be96b9dc.svg",U=(0,s.pM)({name:"Avatar",data(){return{userIcon:I}},props:{imageUrl:{type:String,default:null},username:{type:String,required:!0},isOnline:{type:Boolean,default:!1}}});const W=(0,l.A)(U,[["render",$],["__scopeId","data-v-1c50f020"]]);var L=W,F=o(4116);function M(e){const t=Intl.DateTimeFormat().resolvedOptions().timeZone,o=F.c9.now().setZone(t),n=F.c9.fromISO(e).setZone(t),s=o.diff(n,["years","months","days","hours","minutes"]),a=Math.floor(s.minutes);return s.years>=1?n.toLocaleString(F.c9.DATE_MED):s.months>=1?`${s.months} month${s.months>1?"s":""} ago`:s.days>=1?`${s.days} day${s.days>1?"s":""} ago`:s.hours>=1?`${s.hours} hour${s.hours>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}const R=e=>((0,s.Qi)("data-v-268f6b5a"),e=e(),(0,s.jt)(),e),X=["disabled","aria-disabled"],B=R((()=>(0,s.Lk)("span",{class:"button__ripple"},null,-1)));function N(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("button",{onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),class:(0,h.C4)(["button",`button--${e.theme}`,{"button--outlined":e.outlined},e.customClass]),disabled:e.disabled,role:"button","aria-disabled":e.disabled},[B,(0,s.RG)(e.$slots,"default",{},void 0,!0)],10,X)}var j;(function(e){e["primary"]="primary",e["secondary"]="secondary"})(j||(j={}));var V=(0,s.pM)({name:"Button",props:{theme:{type:String,default:j.primary},outlined:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customClass:{type:String,default:""}},emits:["onClick"],methods:{onClick(e){this.$emit("onClick",e)}}});const z=(0,l.A)(V,[["render",N],["__scopeId","data-v-268f6b5a"]]);var x=z,G=o.p+"img/back.cfeb8d3d.svg",P=o.p+"img/edit.ca37bf03.svg",Q=o.p+"img/trash.168d8e2b.svg";const q=["src"],K={class:"vote__score","aria-live":"polite"},Z=["src"];function Y(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("fieldset",{class:(0,h.C4)(["vote",{"vote--horizontal":e.horizontal}])},[(0,s.Lk)("button",{onClick:t[0]||(t[0]=()=>e.horizontal?e.$emit("onDownvote"):e.$emit("onUpvote")),type:"button","aria-label":"Upvote",class:(0,h.C4)(["vote__up",{"vote__up--active":e.horizontal?e.downvoting:e.upvoting}])},[(0,s.Lk)("img",{src:e.upArrow},null,8,q)],2),(0,s.Lk)("span",K,(0,h.v_)(e.score),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=()=>e.horizontal?e.$emit("onUpvote"):e.$emit("onDownvote")),type:"button","aria-label":"Downvote",class:(0,h.C4)(["vote__down",{"vote__down--active":e.horizontal?e.upvoting:e.downvoting}])},[(0,s.Lk)("img",{src:e.downArrow},null,8,Z)],2)],2)}var H=o.p+"img/upArrow.ecc82b2e.svg",J=o.p+"img/downArrow.a081991a.svg",ee=(0,s.pM)({name:"Vote",data(){return{upArrow:H,downArrow:J}},props:{score:{type:Number,default:0},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1}},emits:["onUpvote","onDownvote"]});const te=(0,l.A)(ee,[["render",Y],["__scopeId","data-v-0e38704c"]]);var oe=te;function ne(e,t,o,a,r,l){return(0,s.uX)(),(0,s.CE)("div",{class:(0,h.C4)(["container",e.classes.container,{"container--collapsed":e.collapsed}])},[(0,s.Lk)("div",{class:(0,h.C4)(["container__header",e.classes.header,{"container__header--collapsable":e.collapsable}]),onClick:t[0]||(t[0]=(...t)=>e.collapse&&e.collapse(...t))},[(0,s.RG)(e.$slots,"header",{},void 0,!0)],2),(0,s.bF)(n.eB,{name:"collapse"},{default:(0,s.k6)((()=>[e.collapsed&&e.collapsable?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,h.C4)(["container__content",e.classes.content])},[(0,s.RG)(e.$slots,"content",{},void 0,!0)],2))])),_:3})],2)}var se=(0,s.pM)({name:"Container",props:{classes:{type:Object,default:()=>({})},collapsable:{type:Boolean,default:!1}},data(){return{collapsed:!1}},methods:{collapse(){this.collapsable&&(this.collapsed=!this.collapsed,this.$emit("onCollapse",this.collapsed))}},emits:["onCollapse"]});const ae=(0,l.A)(se,[["render",ne],["__scopeId","data-v-5bbf5b6e"]]);var re,le=ae;function ie(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("span",{class:(0,h.C4)(["badge",e.customClass,`badge--${e.theme}`])},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],2)}(function(e){e["info"]="info",e["success"]="success"})(re||(re={}));var ce=(0,s.pM)({name:"Badge",props:{customClass:{type:String,default:""},theme:{type:String,default:re.info}}});const ue=(0,l.A)(ce,[["render",ie],["__scopeId","data-v-b4cdad8a"]]);var de=ue;function me(e){let t=e.replies?e.replies.length:0;for(const o of e.replies||[])t+=me(o);return t}const pe=(e,t)=>{for(const o of e){if(o.id===t)return o;const e=pe(o.replies||[],t);if(e)return e}};function ve(e,t){for(let o=0;o<e.length;o++){if(e[o].id===t)return e.splice(o,1),!0;if(ve(e[o].replies||[],t))return!0}return!1}const fe=(0,s.pM)({name:"CommentItem",computed:{indentation(){return this.level*(this.shouldCollapse?30:60)+"px"},numberOfRepliesText(){const e=me(this.comment);return 0===e?"0 Replies":`+${e} Repl${1===e?"y":"ies"}`},shouldCollapse(){return this.windowWidth<=700}},components:{Badge:de,Container:le,Vote:oe,Button:x,Avatar:L},props:{comment:{type:Object,required:!0},username:String,level:{type:Number,default:1},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1}},methods:{timeAgo:M,isAuthor(e){return this.username===e.user.username},onCollapse(e){this.collapsed=e,this.$emit("onCollapse",e)},onDelete(e){e.stopPropagation(),this.$emit("onDelete",this.comment.id)},setWindowWidth(){this.windowWidth=window.innerWidth}},emits:["onCollapse","onDelete","onEdit","onReply","onUpvote","onDownvote"],data(){return{backIcon:G,editIcon:P,trashIcon:Q,collapsed:!1,windowWidth:window.innerWidth}},created(){window.addEventListener("resize",this.setWindowWidth)}}),he=()=>{(0,n.$9)((e=>({"97e3badc":e.indentation})))},ge=fe.setup;fe.setup=ge?(e,t)=>(he(),ge(e,t)):he;var _e=fe;const be=(0,l.A)(_e,[["render",y]]);var we=be,Ce=(0,s.pM)({name:"CommentList",components:{CommentItem:we},props:{comments:{type:Array,required:!0},username:{type:String},level:{type:Number,default:1},upvotes:{type:Array,default:()=>[]},downvotes:{type:Array,default:()=>[]}},data(){return{collapsedIds:new Set}},methods:{onCollapse(e,t){e?this.collapsedIds.add(t):this.collapsedIds.delete(t)},isCollapsed(e){return this.collapsedIds.has(e)},onDelete(e){this.$emit("onDelete",e)}},emits:["onDelete","onEdit","onReply","onUpvote","onDownvote"]});const ye=(0,l.A)(Ce,[["render",f],["__scopeId","data-v-6ef97210"]]);var Oe=ye;function ke(e,t,o,n,s,a){return"Form"}var Ee=(0,s.pM)({name:"CommentForm"});const Se=(0,l.A)(Ee,[["render",ke]]);var De=Se,Ae=(0,s.pM)({name:"CommentsView",components:{CommentList:Oe,CommentForm:De},computed:{...(0,v.aH)(["comments","loading","error","user","upvotes","downvotes"])},methods:{...(0,v.PY)(["addComment"]),...(0,v.i0)(["fetchData","deleteComment","vote"])},mounted(){this.fetchData()}});const Te=(0,l.A)(Ae,[["render",p],["__scopeId","data-v-27b4075c"]]);var $e=Te;const Ie=[{path:"/",name:"home",component:$e}],Ue=(0,d.aE)({history:(0,d.LA)("/comments/"),routes:Ie});var We=Ue,Le=(0,v.y$)({state:{comments:[],loading:!1,error:null,user:{avatar:null,username:null},upvotes:[],downvotes:[]},getters:{},mutations:{SET_USER(e,t){e.user=t},SET_COMMENTS(e,t){e.comments=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_UPVOTES(e,t){e.upvotes=t},SET_DOWNVOTES(e,t){e.downvotes=t}},actions:{async fetchData({commit:e}){try{e("SET_LOADING",!0);const t=await fetch("/data.json"),o=await t.json();e("SET_COMMENTS",o.comments),e("SET_USER",o.user),e("SET_UPVOTES",o.upvotes),e("SET_DOWNVOTES",o.downvotes)}catch(t){e("SET_ERROR",t.message)}finally{e("SET_LOADING",!1)}},vote({commit:e,state:t},{commentId:o,isUpvote:n}){let s=n?t.upvotes:t.downvotes,a=n?t.downvotes:t.upvotes;const r=pe(t.comments,o);if(r){const l=n?1:-1;s.includes(o)?(s=s.filter((e=>e!==o)),r.score-=l):(a.includes(o)?(a=a.filter((e=>e!==o)),r.score+=2*l):r.score+=l,s=[...s,o]),e("SET_COMMENTS",t.comments),e(n?"SET_UPVOTES":"SET_DOWNVOTES",s),e(n?"SET_DOWNVOTES":"SET_UPVOTES",a)}},deleteComment({commit:e,state:t},o){const n=ve(t.comments,o);n&&e("SET_COMMENTS",t.comments)}},modules:{}});(0,n.Ef)(c).use(Le).use(We).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],a=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/comments/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,r=n[0],l=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(i)var u=i(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self["webpackChunkcomments"]=self["webpackChunkcomments"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(5713)}));n=o.O(n)})();
//# sourceMappingURL=app.53bc5b1b.js.map