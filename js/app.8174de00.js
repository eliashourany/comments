(function(){"use strict";var e={5544:function(e,t,n){var o=n(5130),s=n(6768);function a(e,t,n,o,a,r){const i=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(i)}var r=(0,s.pM)({data(){return{}}}),i=n(1241);const l=(0,i.A)(r,[["render",a]]);var c=l,m=n(4458);(0,m.k)("/comments/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=n(1387);const d={class:"page"};function p(e,t,n,o,a,r){const i=(0,s.g2)("comment-list"),l=(0,s.g2)("comment-form");return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(i,{onOnDelete:e.deleteComment,comments:e.comments,username:e.user.username,onOnUpvote:t[0]||(t[0]=t=>e.vote({commentId:t,isUpvote:!0})),onOnDownvote:t[1]||(t[1]=t=>e.vote({commentId:t,isUpvote:!1})),upvotes:e.upvotes,downvotes:e.downvotes,onOnEdit:e.onEdit,onOnReply:e.onReply},null,8,["onOnDelete","comments","username","upvotes","downvotes","onOnEdit","onOnReply"]),(0,s.bF)(l,{user:e.user},null,8,["user"])])}var v=n(782);function f(e,t,n,a,r,i){const l=(0,s.g2)("comment-item"),c=(0,s.g2)("comment-list",!0);return(0,s.uX)(),(0,s.Wv)(o.F,{tag:"div",name:"list",appear:"",class:"list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.comments,(n=>((0,s.uX)(),(0,s.CE)(s.FK,{key:n.id},[(0,s.bF)(l,{comment:n,username:e.username,level:e.level,onOnDelete:e.onDelete,onOnCollapse:t=>e.onCollapse(t,n.id),onOnDownvote:t[0]||(t[0]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[1]||(t[1]=t=>e.$emit("onUpvote",t)),onOnEdit:e.onEdit,onOnReply:e.onReply,upvoting:e.upvotes.includes(n.id),downvoting:e.downvotes.includes(n.id)},null,8,["comment","username","level","onOnDelete","onOnCollapse","onOnEdit","onOnReply","upvoting","downvoting"]),n.replies.length>0&&!e.isCollapsed(n.id)?((0,s.uX)(),(0,s.Wv)(c,{key:0,comments:n.replies,username:e.username,level:e.level+1,onOnDelete:e.onDelete,onOnEdit:e.onEdit,onOnReply:e.onReply,onOnDownvote:t[2]||(t[2]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[3]||(t[3]=t=>e.$emit("onUpvote",t)),upvotes:e.upvotes,downvotes:e.downvotes},null,8,["comments","username","level","onOnDelete","onOnEdit","onOnReply","upvotes","downvotes"])):(0,s.Q3)("",!0)],64)))),128))])),_:1})}var h=n(4232);const g=["datetime"],_={class:"comment__actions"},C=["src"],E=["src"],y=["src"];function O(e,t,n,a,r,i){const l=(0,s.g2)("Avatar"),c=(0,s.g2)("Badge"),m=(0,s.g2)("Button"),u=(0,s.g2)("Vote"),d=(0,s.g2)("Container");return(0,s.uX)(),(0,s.Wv)(d,{collapsable:"",onOnCollapse:e.onCollapse,classes:{container:"comment",content:"comment__content",header:"comment__header"}},{header:(0,s.k6)((()=>[(0,s.bF)(l,{username:e.comment.user.username,"is-online":e.comment.user.isOnline,"image-url":e.comment.user.avatar,className:"comment__avatar"},null,8,["username","is-online","image-url"]),(0,s.bF)(o.eB,{name:"badge"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{theme:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,h.v_)(e.numberOfRepliesText),1)])),_:1},512),[[o.aG,e.collapsed]])])),_:1}),e.isAuthor(e.comment)?((0,s.uX)(),(0,s.Wv)(c,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)(" You ")])),_:1})):(0,s.Q3)("",!0),(0,s.Lk)("time",{class:"comment__date",datetime:e.comment.createdAt},(0,h.v_)(e.timeAgo(e.comment.createdAt)),9,g),(0,s.Lk)("div",_,[e.isAuthor(e.comment)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(m,{outlined:"",theme:"secondary",onOnClick:e.onDelete},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.trashIcon,class:"comment__icon"},null,8,C),(0,s.eW)(" Delete ")])),_:1},8,["onOnClick"]),(0,s.bF)(m,{outlined:"",onOnClick:e.onEdit},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.editIcon,class:"comment__icon"},null,8,E),(0,s.eW)(" Edit ")])),_:1},8,["onOnClick"])],64)):((0,s.uX)(),(0,s.Wv)(m,{key:1,onOnClick:e.onReply,outlined:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.backIcon,class:"comment__icon"},null,8,y),(0,s.eW)(" Reply")])),_:1},8,["onOnClick"]))])])),content:(0,s.k6)((()=>[(0,s.bF)(u,{onOnDownvote:t[0]||(t[0]=()=>e.$emit("onDownvote",e.comment.id)),onOnUpvote:t[1]||(t[1]=()=>e.$emit("onUpvote",e.comment.id)),upvoting:e.upvoting,downvoting:e.downvoting,score:e.comment.score,horizontal:e.shouldCollapse},null,8,["upvoting","downvoting","score","horizontal"]),(0,s.eW)(" "+(0,h.v_)(e.comment.content),1)])),_:1},8,["onOnCollapse"])}const w=e=>((0,s.Qi)("data-v-9f477f28"),e=e(),(0,s.jt)(),e),b=["aria-labelledby"],k=["src","alt"],S={key:1,class:"avatar__default","aria-hidden":"true"},T=["src"],A={key:2,class:"avatar__status","aria-label":"Online"},D=["id"],R={class:"caption__subtitle"},M=w((()=>(0,s.Lk)("br",null,null,-1))),$={class:"caption__subtitle"};function F(e,t,n,o,a,r){return(0,s.uX)(),(0,s.CE)("div",{class:(0,h.C4)(["container",e.className])},[(0,s.Lk)("figure",{class:"avatar","aria-labelledby":e.username},[e.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.imageUrl,alt:e.username+" avatar",class:"avatar__image"},null,8,k)):((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("img",{src:e.userIcon,class:"avatar__default-image"},null,8,T)])),e.isOnline?((0,s.uX)(),(0,s.CE)("span",A)):(0,s.Q3)("",!0)],8,b),(0,s.Lk)("figcaption",{id:e.username,class:"caption"},[(0,s.eW)((0,h.v_)(e.username)+" ",1),(0,s.Lk)("span",R,(0,h.v_)(e.handle),1),M,(0,s.Lk)("span",$,(0,h.v_)(e.title),1)],8,D)],2)}var I=n.p+"img/user.be96b9dc.svg",W=(0,s.pM)({name:"Avatar",data(){return{userIcon:I}},props:{imageUrl:{type:String,default:null},username:{type:String,required:!0},isOnline:{type:Boolean,default:!1},className:{type:String,default:""},handle:String,title:String}});const N=(0,i.A)(W,[["render",F],["__scopeId","data-v-9f477f28"]]);var L=N,U=n(4116);function B(e){const t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=U.c9.now().setZone(t),o=U.c9.fromISO(e).setZone(t),s=n.diff(o,["years","months","days","hours","minutes"]),a=Math.floor(s.minutes);return s.years>=1?o.toLocaleString(U.c9.DATE_MED):s.months>=1?`${s.months} month${s.months>1?"s":""} ago`:s.days>=1?`${s.days} day${s.days>1?"s":""} ago`:s.hours>=1?`${s.hours} hour${s.hours>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}const X=["disabled","aria-disabled"];function V(e,t,n,a,r,i){return(0,s.uX)(),(0,s.CE)("button",{onClick:t[0]||(t[0]=(0,o.D$)(((...t)=>e.onClick&&e.onClick(...t)),["stop"])),class:(0,h.C4)(["button",`button--${e.theme}`,{"button--outlined":e.outlined},e.customClass]),disabled:e.disabled,role:"button","aria-disabled":e.disabled},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],10,X)}var j;(function(e){e["primary"]="primary",e["secondary"]="secondary"})(j||(j={}));var z=(0,s.pM)({name:"Button",props:{theme:{type:String,default:j.primary},outlined:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customClass:{type:String,default:""}},emits:["onClick"],methods:{onClick(e){this.$emit("onClick",e)}}});const x=(0,i.A)(z,[["render",V],["__scopeId","data-v-34be16e6"]]);var G=x,P=n.p+"img/back.cfeb8d3d.svg",q=n.p+"img/edit.ca37bf03.svg",Q=n.p+"img/trash.168d8e2b.svg";const K=["src"],Z={class:"vote__score","aria-live":"polite"},H=["src"];function J(e,t,n,o,a,r){return(0,s.uX)(),(0,s.CE)("fieldset",{class:(0,h.C4)(["vote",{"vote--horizontal":e.horizontal}])},[(0,s.Lk)("button",{onClick:t[0]||(t[0]=()=>e.horizontal?e.$emit("onDownvote"):e.$emit("onUpvote")),type:"button","aria-label":"Upvote",class:(0,h.C4)(["vote__up",{"vote__up--active":e.horizontal?e.downvoting:e.upvoting}])},[(0,s.Lk)("img",{src:e.upArrow},null,8,K)],2),(0,s.Lk)("span",Z,(0,h.v_)(e.score),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=()=>e.horizontal?e.$emit("onUpvote"):e.$emit("onDownvote")),type:"button","aria-label":"Downvote",class:(0,h.C4)(["vote__down",{"vote__down--active":e.horizontal?e.upvoting:e.downvoting}])},[(0,s.Lk)("img",{src:e.downArrow},null,8,H)],2)],2)}var Y=n.p+"img/upArrow.ecc82b2e.svg",ee=n.p+"img/downArrow.a081991a.svg",te=(0,s.pM)({name:"Vote",data(){return{upArrow:Y,downArrow:ee}},props:{score:{type:Number,default:0},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1}},emits:["onUpvote","onDownvote"]});const ne=(0,i.A)(te,[["render",J],["__scopeId","data-v-0e38704c"]]);var oe=ne;function se(e,t,n,a,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:(0,h.C4)(["container",e.classes.container,{"container--collapsed":e.collapsed}])},[(0,s.Lk)("div",{class:(0,h.C4)(["container__header",e.classes.header,{"container__header--collapsable":e.collapsable}]),onClick:t[0]||(t[0]=(...t)=>e.collapse&&e.collapse(...t))},[(0,s.RG)(e.$slots,"header",{},void 0,!0)],2),(0,s.bF)(o.eB,{name:"collapse"},{default:(0,s.k6)((()=>[e.collapsed&&e.collapsable?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,h.C4)(["container__content",e.classes.content])},[(0,s.RG)(e.$slots,"content",{},void 0,!0)],2))])),_:3})],2)}var ae=(0,s.pM)({name:"Container",props:{classes:{type:Object,default:()=>({})},collapsable:{type:Boolean,default:!1}},data(){return{collapsed:!1}},methods:{collapse(){this.collapsable&&(this.collapsed=!this.collapsed,this.$emit("onCollapse",this.collapsed))}},emits:["onCollapse"]});const re=(0,i.A)(ae,[["render",se],["__scopeId","data-v-72134a6c"]]);var ie,le=re;function ce(e,t,n,o,a,r){return(0,s.uX)(),(0,s.CE)("span",{class:(0,h.C4)(["badge",e.customClass,`badge--${e.theme}`])},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],2)}(function(e){e["info"]="info",e["success"]="success"})(ie||(ie={}));var me=(0,s.pM)({name:"Badge",props:{customClass:{type:String,default:""},theme:{type:String,default:ie.info}}});const ue=(0,i.A)(me,[["render",ce],["__scopeId","data-v-b4cdad8a"]]);var de=ue;function pe(e){let t=e.replies?e.replies.length:0;for(const n of e.replies||[])t+=pe(n);return t}const ve=(e,t)=>{for(const n of e){if(n.id===t)return n;const e=ve(n.replies||[],t);if(e)return e}};function fe(e,t){for(let n=0;n<e.length;n++){if(e[n].id===t)return e.splice(n,1),!0;if(fe(e[n].replies||[],t))return!0}return!1}function he(e,t,n){for(let o=0;o<e.length;o++){if(e[o].id===t)return e[o]={...e[o],...n},!0;if(he(e[o].replies||[],t,n))return!0}return!1}function ge(e,t){return{id:(new Date).valueOf(),content:e,user:t,score:0,createdAt:(new Date).toISOString(),replies:[]}}const _e=(0,s.pM)({name:"CommentItem",computed:{indentation(){return this.level*(this.shouldCollapse?30:60)+"px"},numberOfRepliesText(){const e=pe(this.comment);return 0===e?"0 Replies":`+${e} Repl${1===e?"y":"ies"}`},shouldCollapse(){return this.windowWidth<=700}},components:{Badge:de,Container:le,Vote:oe,Button:G,Avatar:L},props:{comment:{type:Object,required:!0},username:String,level:{type:Number,default:1},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1}},methods:{timeAgo:B,isAuthor(e){return this.username===e.user.username},onCollapse(e){this.collapsed=e,this.$emit("onCollapse",e)},onDelete(){this.$emit("onDelete",this.comment.id)},onEdit(){this.$emit("onEdit",this.comment)},onReply(){this.$emit("onReply",this.comment)},setWindowWidth(){this.windowWidth=window.innerWidth}},emits:["onCollapse","onDelete","onEdit","onReply","onUpvote","onDownvote"],data(){return{backIcon:P,editIcon:q,trashIcon:Q,collapsed:!1,windowWidth:window.innerWidth}},created(){window.addEventListener("resize",this.setWindowWidth)}}),Ce=()=>{(0,o.$9)((e=>({ccf5dfa8:e.indentation})))},Ee=_e.setup;_e.setup=Ee?(e,t)=>(Ce(),Ee(e,t)):Ce;var ye=_e;const Oe=(0,i.A)(ye,[["render",O]]);var we=Oe,be=(0,s.pM)({name:"CommentList",components:{CommentItem:we},props:{comments:{type:Array,required:!0},username:{type:String},level:{type:Number,default:0},upvotes:{type:Array,default:()=>[]},downvotes:{type:Array,default:()=>[]}},data(){return{collapsedIds:new Set}},methods:{onCollapse(e,t){e?this.collapsedIds.add(t):this.collapsedIds.delete(t)},isCollapsed(e){return this.collapsedIds.has(e)},onDelete(e){this.$emit("onDelete",e)},onEdit(e){this.$emit("onEdit",e)},onReply(e){this.$emit("onReply",e)}},emits:["onDelete","onEdit","onReply","onUpvote","onDownvote"]});const ke=(0,i.A)(be,[["render",f],["__scopeId","data-v-1c3901ed"]]);var Se=ke;const Te=["placeholder"];function Ae(e,t,n,a,r,i){const l=(0,s.g2)("Avatar"),c=(0,s.g2)("Button"),m=(0,s.g2)("Container");return(0,s.uX)(),(0,s.Wv)(m,null,{header:(0,s.k6)((()=>[(0,s.bF)(l,{username:e.user.username,"is-online":e.user.isOnline,"image-url":e.user.avatar,handle:e.user.handle,title:e.user.title},null,8,["username","is-online","image-url","handle","title"])])),content:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),class:"form",placeholder:e.placeholder},null,8,Te),[[o.Jo,e.value]]),(0,s.bF)(c,{onClick:e.submitForm},{default:(0,s.k6)((()=>[(0,s.eW)("Send")])),_:1},8,["onClick"])])),_:1})}var De;(function(e){e[e["Edit"]=0]="Edit",e[e["Reply"]=1]="Reply",e[e["New"]=2]="New"})(De||(De={}));var Re=(0,s.pM)({name:"CommentForm",components:{Button:G,Avatar:L,Container:le},computed:{...(0,v.aH)(["mode","activeComment","commentForm"]),value:{get(){return this.commentForm},set(e){this.updateForm(e)}},placeholder(){switch(this.mode){case De.Edit:return"Edit your comment";case De.Reply:return`Reply to ${this.activeComment.user.username}`;default:return"Enter a comment"}}},methods:{...(0,v.i0)(["updateForm","submitForm"])},props:{user:{type:Object,required:!0}}});const Me=(0,i.A)(Re,[["render",Ae],["__scopeId","data-v-976b2b4c"]]);var $e=Me,Fe=(0,s.pM)({name:"CommentsView",components:{CommentList:Se,CommentForm:$e},computed:{...(0,v.aH)(["comments","loading","error","user","upvotes","downvotes"])},methods:{...(0,v.PY)(["addComment"]),...(0,v.i0)(["fetchData","deleteComment","vote","setModeAndComment"]),onEdit(e){this.setModeAndComment({mode:De.Edit,comment:e})},onReply(e){this.setModeAndComment({mode:De.Reply,comment:e})}},mounted(){this.fetchData()}});const Ie=(0,i.A)(Fe,[["render",p],["__scopeId","data-v-caffa626"]]);var We=Ie;const Ne=[{path:"/",name:"home",component:We}],Le=(0,u.aE)({history:(0,u.LA)("/comments/"),routes:Ne});var Ue=Le,Be=(n(4114),n(5131));const Xe=(0,Be.A)({key:"comments",paths:["comments","user","upvotes","downvotes"]});var Ve=(0,v.y$)({state:{comments:[],loading:!1,error:null,user:{avatar:"",username:"",title:"",handle:"",isOnline:!1},upvotes:[],downvotes:[],mode:De.New,activeComment:null,commentForm:""},getters:{},mutations:{SET_USER(e,t){e.user=t},SET_COMMENTS(e,t){e.comments=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_UPVOTES(e,t){e.upvotes=t},SET_DOWNVOTES(e,t){e.downvotes=t},SET_MODE(e,t){e.mode=t},SET_ACTIVE_COMMENT(e,t){e.activeComment=t},SET_FORM(e,t){e.commentForm=t}},actions:{async fetchData({commit:e,state:t}){try{if(e("SET_LOADING",!0),t.comments.length>0||t.upvotes.length>0||t.downvotes.length>0)return;const n=await fetch("/comments/data.json"),o=await n.json();e("SET_COMMENTS",o.comments),e("SET_USER",o.user),e("SET_UPVOTES",o.upvotes),e("SET_DOWNVOTES",o.downvotes)}catch(n){e("SET_ERROR",n.message)}finally{e("SET_LOADING",!1)}},vote({commit:e,state:t},{commentId:n,isUpvote:o}){let s=o?t.upvotes:t.downvotes,a=o?t.downvotes:t.upvotes;const r=ve(t.comments,n);if(r){const i=o?1:-1;s.includes(n)?(s=s.filter((e=>e!==n)),r.score-=i):(a.includes(n)?(a=a.filter((e=>e!==n)),r.score+=2*i):r.score+=i,s=[...s,n]),e("SET_COMMENTS",t.comments),e(o?"SET_UPVOTES":"SET_DOWNVOTES",s),e(o?"SET_DOWNVOTES":"SET_UPVOTES",a)}},deleteComment({commit:e,state:t},n){const o=fe(t.comments,n);o&&e("SET_COMMENTS",t.comments)},setModeAndComment({commit:e},{comment:t,mode:n}){e("SET_MODE",n),e("SET_ACTIVE_COMMENT",t),n===De.Edit&&t?e("SET_FORM",t.content):e("SET_FORM","")},updateForm({commit:e},t){e("SET_FORM",t)},submitForm({commit:e,state:t,dispatch:n}){const{mode:o,activeComment:s,commentForm:a,comments:r,user:i}=t;if(!a.length)return!1;const l=ge(a,i);if(o===De.Edit&&s)he(r,s.id,{content:a});else if(o===De.Reply&&s){const e=ve(r,s.id);e&&e.replies.push(l)}else r.push(l);return e("SET_COMMENTS",r),e("SET_FORM",""),n("setModeAndComment",{mode:De.New,comment:null}),!0}},modules:{},plugins:[Xe]});(0,o.Ef)(c).use(Ve).use(Ue).mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(m=0;m<e.length;m++){o=e[m][0],s=e[m][1],a=e[m][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(m--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/comments/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var m=l(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(m)},o=self["webpackChunkcomments"]=self["webpackChunkcomments"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(5544)}));o=n.O(o)})();
//# sourceMappingURL=app.8174de00.js.map