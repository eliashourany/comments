(function(){"use strict";var e={8587:function(e,t,o){var n=o(5130),s=o(6768);function a(e,t,o,n,a,r){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(l)}var r=(0,s.pM)({data(){return{}}}),l=o(1241);const i=(0,l.A)(r,[["render",a]]);var c=i,u=o(4458);(0,u.k)("/comments/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=o(1387);const m={class:"page"};function p(e,t,o,n,a,r){const l=(0,s.g2)("comment-list"),i=(0,s.g2)("comment-form");return(0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(l,{onOnDelete:e.deleteComment,comments:e.comments,username:e.user.username,onOnUpvote:t[0]||(t[0]=t=>e.vote({commentId:t,isUpvote:!0})),onOnDownvote:t[1]||(t[1]=t=>e.vote({commentId:t,isUpvote:!1})),upvotes:e.upvotes,downvotes:e.downvotes},null,8,["onOnDelete","comments","username","upvotes","downvotes"]),(0,s.bF)(i,{username:e.user.username,avatar:e.user.avatar},null,8,["username","avatar"])])}var v=o(782);function f(e,t,o,a,r,l){const i=(0,s.g2)("comment-item"),c=(0,s.g2)("comment-list",!0);return(0,s.uX)(),(0,s.Wv)(n.F,{tag:"div",name:"list",appear:"",class:"list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.comments,(o=>((0,s.uX)(),(0,s.CE)(s.FK,{key:o.id},[(0,s.bF)(i,{comment:o,username:e.username,level:e.level,onOnDelete:e.onDelete,onOnCollapse:t=>e.onCollapse(t,o.id),onOnDownvote:t[0]||(t[0]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[1]||(t[1]=t=>e.$emit("onUpvote",t)),upvoting:e.upvotes.includes(o.id),downvoting:e.downvotes.includes(o.id)},null,8,["comment","username","level","onOnDelete","onOnCollapse","upvoting","downvoting"]),o.replies.length>0&&!e.isCollapsed(o.id)?((0,s.uX)(),(0,s.Wv)(c,{key:0,comments:o.replies,username:e.username,level:e.level+1,onOnDelete:e.onDelete,onOnDownvote:t[2]||(t[2]=t=>e.$emit("onDownvote",t)),onOnUpvote:t[3]||(t[3]=t=>e.$emit("onUpvote",t)),upvotes:e.upvotes,downvotes:e.downvotes},null,8,["comments","username","level","onOnDelete","upvotes","downvotes"])):(0,s.Q3)("",!0)],64)))),128))])),_:1})}var g=o(4232);const h=["datetime"],_={class:"comment__actions"},w=["src"],b=["src"],C=["src"];function y(e,t,o,a,r,l){const i=(0,s.g2)("Avatar"),c=(0,s.g2)("Badge"),u=(0,s.g2)("Button"),d=(0,s.g2)("Vote"),m=(0,s.g2)("Container");return(0,s.uX)(),(0,s.Wv)(m,{collapsable:"",onOnCollapse:e.onCollapse,classes:{container:"comment",content:"comment__content",header:"comment__header"}},{header:(0,s.k6)((()=>[(0,s.bF)(i,{username:e.comment.user.username,"is-online":e.comment.user.isOnline,"image-url":e.comment.user.avatar,className:"comment__avatar"},null,8,["username","is-online","image-url"]),(0,s.bF)(n.eB,{name:"badge"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{theme:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,g.v_)(e.numberOfRepliesText),1)])),_:1},512),[[n.aG,e.collapsed]])])),_:1}),e.isAuthor(e.comment)?((0,s.uX)(),(0,s.Wv)(c,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)(" You ")])),_:1})):(0,s.Q3)("",!0),(0,s.Lk)("time",{class:"comment__date",datetime:e.comment.createdAt},(0,g.v_)(e.timeAgo(e.comment.createdAt)),9,h),(0,s.Lk)("div",_,[e.isAuthor(e.comment)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(u,{outlined:"",theme:"secondary",onOnClick:e.onDelete},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.trashIcon,class:"comment__icon"},null,8,w),(0,s.eW)(" Delete ")])),_:1},8,["onOnClick"]),(0,s.bF)(u,{outlined:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.editIcon,class:"comment__icon"},null,8,b),(0,s.eW)(" Edit ")])),_:1})],64)):((0,s.uX)(),(0,s.Wv)(u,{key:1,outlined:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.backIcon,class:"comment__icon"},null,8,C),(0,s.eW)(" Reply")])),_:1}))])])),content:(0,s.k6)((()=>[(0,s.bF)(d,{onOnDownvote:t[0]||(t[0]=()=>e.$emit("onDownvote",e.comment.id)),onOnUpvote:t[1]||(t[1]=()=>e.$emit("onUpvote",e.comment.id)),upvoting:e.upvoting,downvoting:e.downvoting,score:e.comment.score,horizontal:e.shouldCollapse},null,8,["upvoting","downvoting","score","horizontal"]),(0,s.eW)(" "+(0,g.v_)(e.comment.content),1)])),_:1},8,["onOnCollapse"])}const k=["aria-labelledby"],O=["src","alt"],E={key:1,class:"avatar__default","aria-hidden":"true"},S=["src"],D={key:2,class:"avatar__status","aria-label":"Online"},A=["id"];function T(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("div",{class:(0,g.C4)(["container",e.className])},[(0,s.Lk)("figure",{class:"avatar","aria-labelledby":e.username},[e.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.imageUrl,alt:e.username+" avatar",class:"avatar__image"},null,8,O)):((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("img",{src:e.userIcon,class:"avatar__default-image"},null,8,S)])),e.isOnline?((0,s.uX)(),(0,s.CE)("span",D)):(0,s.Q3)("",!0)],8,k),(0,s.Lk)("figcaption",{id:e.username,class:"caption"},(0,g.v_)(e.username),9,A)],2)}var $=o.p+"img/user.be96b9dc.svg",I=(0,s.pM)({name:"Avatar",data(){return{userIcon:$}},props:{imageUrl:{type:String,default:null},username:{type:String,required:!0},isOnline:{type:Boolean,default:!1},className:{type:String,default:""}}});const W=(0,l.A)(I,[["render",T],["__scopeId","data-v-233c0f70"]]);var U=W,L=o(4116);function F(e){const t=Intl.DateTimeFormat().resolvedOptions().timeZone,o=L.c9.now().setZone(t),n=L.c9.fromISO(e).setZone(t),s=o.diff(n,["years","months","days","hours","minutes"]),a=Math.floor(s.minutes);return s.years>=1?n.toLocaleString(L.c9.DATE_MED):s.months>=1?`${s.months} month${s.months>1?"s":""} ago`:s.days>=1?`${s.days} day${s.days>1?"s":""} ago`:s.hours>=1?`${s.hours} hour${s.hours>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}const M=["disabled","aria-disabled"];function B(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("button",{onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),class:(0,g.C4)(["button",`button--${e.theme}`,{"button--outlined":e.outlined},e.customClass]),disabled:e.disabled,role:"button","aria-disabled":e.disabled},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],10,M)}var N;(function(e){e["primary"]="primary",e["secondary"]="secondary"})(N||(N={}));var X=(0,s.pM)({name:"Button",props:{theme:{type:String,default:N.primary},outlined:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customClass:{type:String,default:""}},emits:["onClick"],methods:{onClick(e){this.$emit("onClick",e)}}});const R=(0,l.A)(X,[["render",B],["__scopeId","data-v-3d1a6b3b"]]);var j=R,V=o.p+"img/back.cfeb8d3d.svg",z=o.p+"img/edit.ca37bf03.svg",x=o.p+"img/trash.168d8e2b.svg";const G=["src"],P={class:"vote__score","aria-live":"polite"},Q=["src"];function q(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("fieldset",{class:(0,g.C4)(["vote",{"vote--horizontal":e.horizontal}])},[(0,s.Lk)("button",{onClick:t[0]||(t[0]=()=>e.horizontal?e.$emit("onDownvote"):e.$emit("onUpvote")),type:"button","aria-label":"Upvote",class:(0,g.C4)(["vote__up",{"vote__up--active":e.horizontal?e.downvoting:e.upvoting}])},[(0,s.Lk)("img",{src:e.upArrow},null,8,G)],2),(0,s.Lk)("span",P,(0,g.v_)(e.score),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=()=>e.horizontal?e.$emit("onUpvote"):e.$emit("onDownvote")),type:"button","aria-label":"Downvote",class:(0,g.C4)(["vote__down",{"vote__down--active":e.horizontal?e.upvoting:e.downvoting}])},[(0,s.Lk)("img",{src:e.downArrow},null,8,Q)],2)],2)}var K=o.p+"img/upArrow.ecc82b2e.svg",Z=o.p+"img/downArrow.a081991a.svg",Y=(0,s.pM)({name:"Vote",data(){return{upArrow:K,downArrow:Z}},props:{score:{type:Number,default:0},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1}},emits:["onUpvote","onDownvote"]});const H=(0,l.A)(Y,[["render",q],["__scopeId","data-v-0e38704c"]]);var J=H;function ee(e,t,o,a,r,l){return(0,s.uX)(),(0,s.CE)("div",{class:(0,g.C4)(["container",e.classes.container,{"container--collapsed":e.collapsed}])},[(0,s.Lk)("div",{class:(0,g.C4)(["container__header",e.classes.header,{"container__header--collapsable":e.collapsable}]),onClick:t[0]||(t[0]=(...t)=>e.collapse&&e.collapse(...t))},[(0,s.RG)(e.$slots,"header",{},void 0,!0)],2),(0,s.bF)(n.eB,{name:"collapse"},{default:(0,s.k6)((()=>[e.collapsed&&e.collapsable?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,g.C4)(["container__content",e.classes.content])},[(0,s.RG)(e.$slots,"content",{},void 0,!0)],2))])),_:3})],2)}var te=(0,s.pM)({name:"Container",props:{classes:{type:Object,default:()=>({})},collapsable:{type:Boolean,default:!1}},data(){return{collapsed:!1}},methods:{collapse(){this.collapsable&&(this.collapsed=!this.collapsed,this.$emit("onCollapse",this.collapsed))}},emits:["onCollapse"]});const oe=(0,l.A)(te,[["render",ee],["__scopeId","data-v-72134a6c"]]);var ne,se=oe;function ae(e,t,o,n,a,r){return(0,s.uX)(),(0,s.CE)("span",{class:(0,g.C4)(["badge",e.customClass,`badge--${e.theme}`])},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],2)}(function(e){e["info"]="info",e["success"]="success"})(ne||(ne={}));var re=(0,s.pM)({name:"Badge",props:{customClass:{type:String,default:""},theme:{type:String,default:ne.info}}});const le=(0,l.A)(re,[["render",ae],["__scopeId","data-v-b4cdad8a"]]);var ie=le;function ce(e){let t=e.replies?e.replies.length:0;for(const o of e.replies||[])t+=ce(o);return t}const ue=(e,t)=>{for(const o of e){if(o.id===t)return o;const e=ue(o.replies||[],t);if(e)return e}};function de(e,t){for(let o=0;o<e.length;o++){if(e[o].id===t)return e.splice(o,1),!0;if(de(e[o].replies||[],t))return!0}return!1}const me=(0,s.pM)({name:"CommentItem",computed:{indentation(){return this.level*(this.shouldCollapse?30:60)+"px"},numberOfRepliesText(){const e=ce(this.comment);return 0===e?"0 Replies":`+${e} Repl${1===e?"y":"ies"}`},shouldCollapse(){return this.windowWidth<=700}},components:{Badge:ie,Container:se,Vote:J,Button:j,Avatar:U},props:{comment:{type:Object,required:!0},username:String,level:{type:Number,default:1},upvoting:{type:Boolean,default:!1},downvoting:{type:Boolean,default:!1}},methods:{timeAgo:F,isAuthor(e){return this.username===e.user.username},onCollapse(e){this.collapsed=e,this.$emit("onCollapse",e)},onDelete(e){e.stopPropagation(),this.$emit("onDelete",this.comment.id)},setWindowWidth(){this.windowWidth=window.innerWidth}},emits:["onCollapse","onDelete","onEdit","onReply","onUpvote","onDownvote"],data(){return{backIcon:V,editIcon:z,trashIcon:x,collapsed:!1,windowWidth:window.innerWidth}},created(){window.addEventListener("resize",this.setWindowWidth)}}),pe=()=>{(0,n.$9)((e=>({"194a0cec":e.indentation})))},ve=me.setup;me.setup=ve?(e,t)=>(pe(),ve(e,t)):pe;var fe=me;const ge=(0,l.A)(fe,[["render",y]]);var he=ge,_e=(0,s.pM)({name:"CommentList",components:{CommentItem:he},props:{comments:{type:Array,required:!0},username:{type:String},level:{type:Number,default:0},upvotes:{type:Array,default:()=>[]},downvotes:{type:Array,default:()=>[]}},data(){return{collapsedIds:new Set}},methods:{onCollapse(e,t){e?this.collapsedIds.add(t):this.collapsedIds.delete(t)},isCollapsed(e){return this.collapsedIds.has(e)},onDelete(e){this.$emit("onDelete",e)}},emits:["onDelete","onEdit","onReply","onUpvote","onDownvote"]});const we=(0,l.A)(_e,[["render",f],["__scopeId","data-v-0a458699"]]);var be=we;const Ce=e=>((0,s.Qi)("data-v-53de76a1"),e=e(),(0,s.jt)(),e),ye=Ce((()=>(0,s.Lk)("textarea",{class:"form",placeholder:"Enter a comment"},null,-1)));function ke(e,t,o,n,a,r){const l=(0,s.g2)("Avatar"),i=(0,s.g2)("Button"),c=(0,s.g2)("Container");return(0,s.uX)(),(0,s.Wv)(c,null,{header:(0,s.k6)((()=>[(0,s.bF)(l,{username:e.username,"is-online":!0,"image-url":e.avatar},null,8,["username","image-url"])])),content:(0,s.k6)((()=>[ye,(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.eW)("Send")])),_:1})])),_:1})}var Oe=(0,s.pM)({name:"CommentForm",components:{Button:j,Avatar:U,Container:se},props:{username:{type:String,default:""},avatar:{type:String,default:""}}});const Ee=(0,l.A)(Oe,[["render",ke],["__scopeId","data-v-53de76a1"]]);var Se=Ee,De=(0,s.pM)({name:"CommentsView",components:{CommentList:be,CommentForm:Se},computed:{...(0,v.aH)(["comments","loading","error","user","upvotes","downvotes"])},methods:{...(0,v.PY)(["addComment"]),...(0,v.i0)(["fetchData","deleteComment","vote"])},mounted(){this.fetchData()}});const Ae=(0,l.A)(De,[["render",p],["__scopeId","data-v-876e926c"]]);var Te=Ae;const $e=[{path:"/",name:"home",component:Te}],Ie=(0,d.aE)({history:(0,d.LA)("/comments/"),routes:$e});var We=Ie,Ue=(0,v.y$)({state:{comments:[],loading:!1,error:null,user:{avatar:null,username:null},upvotes:[],downvotes:[]},getters:{},mutations:{SET_USER(e,t){e.user=t},SET_COMMENTS(e,t){e.comments=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_UPVOTES(e,t){e.upvotes=t},SET_DOWNVOTES(e,t){e.downvotes=t}},actions:{async fetchData({commit:e}){try{e("SET_LOADING",!0);const t=await fetch("/comments/data.json"),o=await t.json();e("SET_COMMENTS",o.comments),e("SET_USER",o.user),e("SET_UPVOTES",o.upvotes),e("SET_DOWNVOTES",o.downvotes)}catch(t){e("SET_ERROR",t.message)}finally{e("SET_LOADING",!1)}},vote({commit:e,state:t},{commentId:o,isUpvote:n}){let s=n?t.upvotes:t.downvotes,a=n?t.downvotes:t.upvotes;const r=ue(t.comments,o);if(r){const l=n?1:-1;s.includes(o)?(s=s.filter((e=>e!==o)),r.score-=l):(a.includes(o)?(a=a.filter((e=>e!==o)),r.score+=2*l):r.score+=l,s=[...s,o]),e("SET_COMMENTS",t.comments),e(n?"SET_UPVOTES":"SET_DOWNVOTES",s),e(n?"SET_DOWNVOTES":"SET_UPVOTES",a)}},deleteComment({commit:e,state:t},o){const n=de(t.comments,o);n&&e("SET_COMMENTS",t.comments)}},modules:{}});(0,n.Ef)(c).use(Ue).use(We).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],a=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/comments/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,r=n[0],l=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(i)var u=i(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self["webpackChunkcomments"]=self["webpackChunkcomments"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(8587)}));n=o.O(n)})();
//# sourceMappingURL=app.df399cc8.js.map